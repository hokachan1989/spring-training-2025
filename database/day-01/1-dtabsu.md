# 1. データベース入門

### 1.1 データベースとは？

**データベース**とは、構造化された形式で情報を保存し、効率的に管理するためのシステムです。簡単に言えば、データを整理して保存し、必要なときに素早く取り出せるようにする 「電子的なファイリングキャビネット」 のようなものです。

#### データベースの役割

* **データの保存**: 大量のデータを構造化された形式で保存します
* **データの整合性確保**: データの正確性と一貫性を維持します
* **効率的なアクセス**: 必要なデータに素早くアクセスできます
* **データ保護**: 不正アクセスからデータを守ります
* **同時アクセス制御**: 複数のユーザーが同時にデータにアクセスできるよう管理します

> 📝 **ポイント**: 現代のほぼすべてのアプリケーションはデータベースを使用しています (Webサイト、銀行システム、在庫管理、SNSなど) 。

#### データベースの種類

主なデータベースの種類は以下の通りです。

1. **リレーショナルデータベース (RDBMS)**
   * テーブル (表) 形式でデータを管理
   * SQL 言語で操作
   * 例: MySQL、PostgreSQL、Oracle Database、SQL Server
2. **NoSQL データベース**
   * 非リレーショナルで柔軟なデータモデル
   * 種類: ドキュメント型、キーバリュー型、カラム指向型、グラフ型
   * 例: MongoDB、Redis、Cassandra、Neo4j

この研修では、特に **MySQL** に焦点を当てて解説しています。

### 1.2 リレーショナルデータベースの基本概念

リレーショナルデータベースは、1970年代に E.F. Codd によって提案されたモデルで、現在も最も広く使われているデータベース形式です。

#### 主要な概念

**テーブル (表)**

データは 「テーブル」 と呼ばれる二次元の表で管理されます。

**ユーザーテーブル**

<table><thead><tr><th width="128.81817626953125">user_id</th><th width="148">名前</th><th width="287.5455322265625">メールアドレス</th><th>登録日</th></tr></thead><tbody><tr><td>1</td><td>山田太郎</td><td>yamada@example.com</td><td>2023-01-15</td></tr><tr><td>2</td><td>鈴木花子</td><td>suzuki@example.com</td><td>2023-02-20</td></tr><tr><td>3</td><td>佐藤次郎</td><td>sato@example.com</td><td>2023-03-05</td></tr></tbody></table>

**行 (レコード/ロー)**

テーブル内の 1行分のデータ。例えば上の表の 「山田太郎」 の行は1つのレコードです。

**列（カラム）**

データの属性や特性を表します。例: 「名前」 「メールアドレス」 「登録日」 など。

**主キー (Primary Key)**

各レコードを一意に識別するためのカラム。上の例では 「user\_id」 が主キーです。

**外部キー (Foreign Key)**

他のテーブルの主キーを参照するカラムで、テーブル間の関連付けに使用されます。

**注文テーブル**

| order\_id | user\_id | 金額   |
| --------- | -------- | ---- |
| 101       | 1        | 5000 |
| 102       | 2        | 3000 |
| 103       | 1        | 2000 |

この例では、「注文テーブル」 の 「user\_id」 は 「ユーザーテーブル」 の 「user\_id」 を参照する外部キーです。

**リレーションシップ (関連)**

テーブル間の関係を表します。主に以下の種類があります。

* **1 対 1 (One-to-One)**: 一方のテーブルの 1 レコードがもう一方のテーブルの1レコードだけに関連
* **1 対多 (One-to-Many)**: 一方のテーブルの 1 レコードがもう一方のテーブルの複数レコードに関連
  * 上の例では、「ユーザー」 と 「注文」 は1対多の関連 ( 1人のユーザーが複数の注文を持つ)
* **多対多 (Many-to-Many)**: 両方のテーブルのレコードが互いに複数のレコードに関連

### 1.3 SQL とは

**SQL (Structured Query Language)** は、リレーショナルデータベースを操作するための標準言語です。

#### SQL の主な特徴

* **宣言型言語**: 「何を」 取得したいかを指定するだけで、「どのように」 取得するかはデータベースシステムが決定
* **標準化**: ANSI や ISO によって標準化されているため、基本的な文法はデータベース製品間で共通
* **データ定義、操作、制御が可能**: データベース構造の定義からデータの検索、更新、アクセス権限の管理まで対応

#### SQL の主要な命令分類

1. **データ定義言語 (DDL: Data Definition Language)**
   * データベース構造の作成・変更・削除
   * 代表的なコマンド: `CREATE`, `ALTER`, `DROP`&#x20;
2. **データ操作言語 (DML: Data Manipulation Language)**
   * データの取得・追加・更新・削除
   * 代表的なコマンド: `SELECT`, `INSERT`, `UPDATE`, `DELETE`
3. **データ制御言語 (DCL: Data Control Language)**
   * アクセス権限の付与・取り消し
   * 代表的なコマンド: `GRANT`, `REVOKE`
4. **トランザクション制御言語 (TCL: Transaction Control Language)**
   * トランザクションの開始・完了・取り消し
   * 代表的なコマンド: `COMMIT`, `ROLLBACK`, `SAVEPOINT`&#x20;

### 1.4 MySQL の概要

MySQL は世界で最も広く使われているオープンソースのリレーショナルデータベース管理システム (RDBMS) の一つです。

#### MySQL の特徴

* **オープンソース**: 無料で使用可能 (商用利用にはライセンスが必要な場合も)
* **高速**: 高いパフォーマンスと安定性を提供
* **信頼性**: 大規模なウェブサイトやアプリケーションで広く採用（Facebook、YouTube,、Twitterなど）
* **互換性**: 標準 SQL をサポートし、多くのプログラミング言語やフレームワークと連携可能
* **クロスプラットフォーム**: Windows、Linux、macOS など様々な OS 上で動作

#### MySQL のバージョン

現在の最新安定版は **MySQL 8.4**です (2025年時点)。

#### MySQL の主な用途

* Web アプリケーションのバックエンド
* データ分析や報告書の作成
* e コマースサイト
* コンテンツ管理システム (WordPress等)
* ログデータの保存と分析

#### MySQL関連ツール

* **MySQL Workbench**: 視覚的なデータベース設計・管理ツール
* **phpMyAdmin**: ブラウザベースの管理ツール
* **MySQL Shell**: コマンドラインインターフェース
* **MySQL Shell for VS Code**: VS Code 内で MySQL を操作するための拡張機能

***

### 演習問題

#### 問題 1-1: データベースの基本概念

以下の用語について、適切な説明を選んでください。

1. **データベース**とは？
   1. Web サイトを作成するためのプログラム
   2. データを構造化された形式で保存・管理するシステム
   3. データを分析するためのツール
   4. プログラミング言語の一種
2. **リレーショナルデータベース**の主な特徴は？
   1. 非構造化データを格納する
   2. テーブル (表) 形式でデータを管理する
   3. グラフ理論に基づいてデータを保存する
   4. インメモリーでのみデータを管理する
3. **SQL** とは？
   1. 特定のデータベース製品の名前
   2. データベースサーバーを構築するためのフレームワーク
   3. リレーショナルデータベースを操作するための言語
   4. Web アプリケーションの開発言語

<details>

<summary>解答</summary>

1. b) データを構造化された形式で保存・管理するシステム
2. b) テーブル (表) 形式でデータを管理する
3. c) リレーショナルデータベースを操作するための言語

</details>

#### 問題 1-2: テーブルの構成要素

以下の説明とリレーショナルデータベースの構成要素を正しく対応させてください。

1. テーブル内の 1 行分のデータ
2. データの属性や特性を表す列
3. 各レコードを一意に識別するためのカラム
4. 他のテーブルの主キーを参照するカラム

> a)  カラム        b)  外部キー        c)  レコード        d)  主キー

<details>

<summary>解答</summary>

* c)  レコード
* a)  カラム
* d)  主キー
* b)  外部キー

</details>

#### 問題 1-3: SQL の種類と役割

以下の SQL 命令が、どの分類に属するかを判断してください。

1. `CREATE TABLE customers`
2. `SELECT * FROM products`
3. `INSERT INTO orders VALUES (...)`
4. `UPDATE users SET status = 'active'`
5. `DROP DATABASE old_records`&#x20;

> a)  DDL (データ定義言語)        b)  DML (データ操作言語)

<details>

<summary>解答</summary>

* a)  DDL - テーブルの作成

- b)  DML - データの取得

* b)  DML - データの追加

- b)  DML - データの更新

* a)  DDL - データベースの削除

</details>

#### 問題 1-4: 実際のビジネスシナリオ

あなたはオンライン書店のシステムを設計することになりました。以下の要件を満たすために、どのようなテーブルが必要か考えてください。各テーブルに必要な主なカラム (属性) も考えましょう。

要件:

* ユーザー情報の管理 (名前、メールアドレス、住所など)
* 書籍情報の管理 (タイトル、著者、価格、在庫数など)
* 注文履歴の管理 (誰が、いつ、どの本を、何冊購入したかなど)

<details>

<summary>解答例</summary>

以下のようなテーブル設計が考えられます。

1. **ユーザーテーブル (users)**
   * user\_id (主キー)
   * 氏名
   * メールアドレス
   * 住所
   * 電話番号
   * 登録日
2. **書籍テーブル (books)**
   * book\_id (主キー)
   * タイトル
   * 著者
   * 出版社
   * 価格
   * 在庫数
   * ISBN
3. **注文テーブル (orders)**
   * order\_id (主キー)
   * user\_id (外部キー)
   * 注文日
   * 合計金額
   * 配送状況
4. **注文詳細テーブル (order\_details)**
   * order\_detail\_id (主キー)
   * order\_id (外部キー)
   * book\_id (外部キー)
   * 購入数量
   * 購入時価格

この構造では、

* ユーザーと注文は 1 対多の関係 ( 1人のユーザーが複数の注文を持つことができる)
* 注文と注文詳細は 1 対多の関係 ( 1つの注文に複数の書籍を含むことができる)
* 書籍と注文詳細は 1 対多の関係 ( 1つの書籍が複数の注文に含まれることができる)

</details>

#### 問題 1-5: MySQL の特徴

MySQL の正しい特徴を選んでください (複数選択可)。

&#x20; a)  有料のプロプライエタリー製品である

&#x20; b)  オープンソースの RDBMS である

&#x20; c)  Windows 上でのみ動作する

&#x20; d) 標準 SQL に準拠している

&#x20; e)  WordPress などの CMS で広く使用されている

<details>

<summary>解答</summary>

正解: b、d、e

MySQL はオープンソースで、複数の OS で動作し、標準 SQL をサポートしています。多くのWeb サイトやアプリケーションのバックエンドとして使われています。

</details>
