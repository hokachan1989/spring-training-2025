# Python: 条件分岐

### 6.1 条件分岐とは？

**条件分岐**は、特定の条件が成立するかどうかによってプログラムの実行経路を変えるプログラミングの基本構造です。条件分岐を使うことで、状況に応じた処理を行うプログラムを作成できます。

#### 条件分岐の必要性

プログラムは単に上から下へ順番に実行するだけでなく、データや状況に応じて異なる処理を行う必要があります。例えば、

* ユーザーの年齢によって表示するコンテンツを変える
* 入力値が有効かどうかを確認し、無効な場合はエラーメッセージを表示する
* 商品の在庫状況によって購入ボタンの表示・非表示を切り替える
* スコアに応じて異なる評価やフィードバックを提供する

> 📝 **ポイント**: 条件分岐はプログラムに 「判断力」 を与えます。これにより、同じプログラムでも異なる状況に対応できるようになります。

### 6.2 if 文の基本構造

```
    ┌───────┐
    │  開始 │
    └───┬───┘
        ↓
┌───────────────┐
│  条件を評価    │
└───────┬───────┘
        ↓
    ┌───────┐ Yes
    │ 条件式 ├────→ ┌──────────┐
    └───┬───┘      │   処理A   │
        │ No       └─────┬────┘
        ↓                │
    ┌───────┐            │
    │ 終了   │←──────────┘
    └───────┘
```

Pythonでは `if` 文を使って条件分岐を実装します。

```python
# 基本構文
if 条件式:
    # 条件が真の場合に実行される処理
    処理1
    処理2
    ...
```

条件式の結果が <mark style="color:purple;">`True`</mark> の場合、インデント (字下げ) されたブロック内の処理が実行されます。条件式の結果が <mark style="color:purple;">`False`</mark> の場合、そのブロックはスキップされます。

{% hint style="warning" %}
条件式の後にはコロン ( `:` ) が必須です。また、Pythonでは、一般的に 4つのスペースが標準的なインデントとして使用されます。インデントを揃えないとエラーになるので注意しましょう。
{% endhint %}

#### 条件式の例

条件式には、比較演算子 ( `>`, `<`, `==` など) や論理演算子 ( `and`, `or`, `not` ) を使用できます。

```python
# 基本的なif文
x = 10
print(f"xの値は{x}です")

if x > 0:
    print("xは正の数です")
```

<details>

<summary>実行結果</summary>

```
xの値は10です
xは正の数です
```

</details>

> 📝 **ポイント**: 条件式が `True` と評価された場合のみ、インデントされたコードブロックが実行されます。

### 6.3 if-else 構文

条件が満たされない場合に別の処理を行いたい場合は、`if-else` 構文を使用します。

```
    ┌───────┐
    │ 開始  │
    └───┬───┘
        ↓
┌───────────────┐
│  条件を評価   　│
└───────┬───────┘
        ↓
    ┌───────┐ Yes   ┌──────────┐
    │　条件式 ├─────→│ 　処理A   │
    └───┬───┘       └─────┬────┘
        │ No              │
        ↓                 │
　　┌─────────┐  　        │
   │  処理B   │    　      │
   └────┬────┘     　     │
        ↓                 ↓
    ┌───────┐             │
    │  終了  │←───────────┘
    └───────┘
```

<pre><code># 基本構文
if 条件式:
<strong>    # 条件が真の場合に実行される処理
</strong>    処理A
else:
    # 条件が偽の場合に実行される処理
    処理B
</code></pre>

> 📝 **ポイント**: `if` 文と `else` 文は対になっており、条件が満たされない場合は必ず `else` ブロックの処理が実行されます。

#### 例：正の数と負の数の判定

```python
x = -5

if x > 0:
    print("xは正の数です")
else:
    print("xは0または負の数です")
```

<details>

<summary>実行結果</summary>

```
xは0または負の数です
```

</details>

### 6.4 if-elif-else 構文 ⭐

3つ以上の選択肢がある場合や、複数の条件を順番に評価する必要がある場合は、`if-elif-else` 構文を使用します。<mark style="color:purple;">`elif`</mark> は 「else if」 の略です。

```python
# 基本構文
if 条件式1:
    # 条件式1が真の場合に実行される処理
    処理A
elif 条件式2:
    # 条件式1が偽で、条件式2が真の場合に実行される処理
    処理B
elif 条件式3:
    # 条件式1と2が偽で、条件式3が真の場合に実行される処理
    処理C
else:
    # すべての条件式が偽の場合に実行される処理
    処理D
```

条件は上から順に評価され、最初に真となった条件に対応するブロックのみが実行されます。

> 📝 **ポイント**: 複数の `elif` ブロックを持つことができます。条件は上から順に評価され、最初に `True` と評価された条件のブロックのみが実行されます。その後の条件は評価されません。

#### 例：成績評価システム

```python
score = 85

if score >= 90:
    print("評価: A")
elif score >= 80:
    print("評価: B")
elif score >= 70:
    print("評価: C")
elif score >= 60:
    print("評価: D")
else:
    print("評価: F")
```

<details>

<summary>実行結果</summary>

```
評価: B
```

</details>

### 6.5 複合条件とネストの条件分岐 ⭐

条件式の組み合わせや `if` 文のネストを使用することで、より複雑な条件分岐を実現できます。

#### 論理演算子を使った条件の組み合わせ

複雑な条件を表現するために、論理演算子 ( `and`, `or`, `not` ) を使用して条件式を組み合わせることができます。

```python
# AND条件（両方の条件を満たす必要がある）
age = 25
income = 300000

if age >= 20 and income >= 250000:
    print("ローン申請資格があります")
```

<details>

<summary>実行結果</summary>

```
ローン申請資格があります
```

</details>

```python
# OR条件（少なくとも一方の条件を満たせばよい）
day = "土曜日"

if day == "土曜日" or day == "日曜日":
    print("週末です")
```

<details>

<summary>実行結果</summary>

```
週末です
```

</details>

```python
# NOTとの組み合わせ
is_holiday = False

if not is_holiday:
    print("仕事の日です")
```

<details>

<summary>実行結果</summary>

```
仕事の日です
```

</details>

#### ネストした if 文

`if` 文の中に別の `if` 文をネストすることで、より詳細な条件分岐を実現できます。

使用例: 年齢と免許による判定

```python
age = 25
has_license = True

if age >= 18:
    print("成人です")
    if has_license:
        print("運転できます")
    else:
        print("免許がありません")
else:
    print("未成年です")
```

<details>

<summary>実行結果</summary>

```
成人です
運転できます
```

</details>

> 📝 **ポイント**: 条件の組み合わせとネストはどちらも複雑な条件を表現できますが、読みやすさを考慮して使い分けましょう。一般的に、関連する条件は `and` や `or` で結合し、異なる概念の条件はネストを使用します。

### 6.6 インデントの重要性

Pythonでは、インデントがコードブロックを定義する重要な要素です。適切なインデントがないと、構文エラーが発生したり、予期しない動作をしたりします。

#### 正しいインデントの例

```python
if x > 0:
    print("xは正の数です")  # インデント
    y = x * 2              # 同じブロック内
    print(f"yは{y}です")    # 同じブロック内
    
    if y > 10:             # ネストされた条件分岐
        print("yは10より大きいです")  # さらにインデント
        z = y * 2
    print("yの処理を完了しました")  # 元のインデントレベルに戻る

print("処理終了")  # インデントなし (メインブロック)
```

### 6.7 よくあるエラーと注意点

#### 代入 (=) と等価比較 (==) の混同

```python
pythonコピー# 間違い
if x = 10:  # SyntaxError
    print("xは10です")

# 正しい
if x == 10:
    print("xは10です")
```

> 📝 **ポイント**: 代入には `=` を、等価比較には `==` を使用します。条件式で間違えると構文エラーになります。

#### 文字列と数値の比較

```python
pythonコピー# 間違い
age = input("年齢を入力してください: ")  # 文字列として入力される
if age >= 18:  # TypeError
    print("成人です")

# 正しい
age = int(input("年齢を入力してください: "))  # 整数に変換
if age >= 18:
    print("成人です")
```

> 📝 **ポイント**: `input()` 関数は常に文字列を返すため、数値として比較したい場合は `int()` や `float()` で型変換する必要があります。

#### インデントの不一致

```python
pythonコピー# 間違い
if score >= 60:
    print("合格です")
  print("おめでとう")  # インデントが不一致でエラー

# 正しい
if score >= 60:
    print("合格です")
    print("おめでとう")
```

> 📝 **ポイント**: 同じブロック内のコードは、同じレベルのインデントを持つ必要があります。インデントの不一致はエラーの原因になります。

### 6.8 実践：計算機プログラム ⭐

条件分岐を使った簡単な計算機プログラムを作成してみましょう。

```python
pythonコピー# 簡単な計算機プログラム
print("計算機プログラム")
print("===========")

# 数値の入力
num1 = float(input("1つ目の数値を入力してください: "))
num2 = float(input("2つ目の数値を入力してください: "))

# 演算子の入力
operator = input("演算子を入力してください (+, -, *, /): ")

# 条件分岐で計算処理
if operator == "+":
    result = num1 + num2
    print(f"{num1} + {num2} = {result}")
elif operator == "-":
    result = num1 - num2
    print(f"{num1} - {num2} = {result}")
elif operator == "*":
    result = num1 * num2
    print(f"{num1} * {num2} = {result}")
elif operator == "/":
    if num2 == 0:
        print("エラー: ゼロで割ることはできません")
    else:
        result = num1 / num2
        print(f"{num1} / {num2} = {result}")
else:
    print("エラー: 無効な演算子です")

print("計算完了")
```

> 📝 **ポイント**: 実際のプログラムでは、複数の条件分岐を組み合わせて、ユーザー入力の検証やエラー処理も行います。このように条件分岐を使うことで、様々な状況に対応するプログラムを作成できます。



***

### 演習問題

#### 問題6-1: シンプルな if 文

以下の変数 `number` を使って、値が 10 より大きい場合に 「10より大きいです」 というメッセージを表示する if 文を作成してください。

```python
number = 15

# numberが10より大きい場合に「10より大きいです」と表示する

```

<details>

<summary>ヒント</summary>

* if文の基本構文は `if 条件式:` です

- 条件式が `True` と評価される場合、インデントされたブロックのコードが実行されます

* 比較演算子 `>` を使って、値が大きいかどうかを比較できます

</details>

#### 問題6-2: if-else 文

以下の変数 `temperature` を使って、値が 20以上なら 「暑いですね」、そうでなければ 「寒いですね」 と表示する if-else 文を作成してください。

```python
temperature = 25

# temperatureが20以上なら「暑いですね」、そうでなければ「寒いですね」と表示する

```

<details>

<summary>ヒント</summary>

* 比較演算子 `>=` を使って、値が以上かどうかを比較できます

</details>

#### 問題6-3: if-elif-else 文

以下の変数 `score` を使って、点数に応じて成績を表示する if-elif-else 文を作成してください。

* 90点以上：「優秀です！」
* 70点以上90点未満：「良好です！」
* 50点以上70点未満：「頑張りましょう！」
* 50点未満：「もっと勉強が必要です！」

```python
score = 75

# scoreに応じて成績メッセージを表示する
```

<details>

<summary>ヒント</summary>

* 複数の比較演算子を使って、範囲を指定することができます

- 条件は上から順に評価され、最初に `True` と評価された条件のブロックだけが実行されます

</details>

#### 問題6-4: 奇数・偶数判定

以下の変数 `number` を使って、その数が奇数か偶数かを判定して表示するプログラムを作成してください。

```python
number = 24

# numberが奇数か偶数かを判定して表示する

```

<details>

<summary>ヒント</summary>

* 整数が偶数かどうかは、2 で割った余りで判定します
* 剰余 (余り) 演算子 `%` を使います (例: `number % 2` )
* 偶数なら 2 で割った余りは 0 になります ( `number % 2 == 0` )
* if-else 文を使って、偶数と奇数の場合で異なるメッセージを表示します

</details>

#### 問題 6-5: 論理演算子の使用

以下の変数を使って、論理演算子 ( `and`, `or`, `not` ) の使い方を実践しましょう。

```python
age = 20
has_ticket = True
is_holiday = False

# 1. ageが18以上かつhas_ticketがTrueの場合に「入場できます」と表示する


# 2. is_holidayがTrueまたはageが65以上の場合に「今日は割引です」と表示する


# 3. is_holidayがFalseの場合に「平日です」と表示する


```

<details>

<summary>ヒント</summary>

* 論理演算子 `and` を使うと、両方の条件が `True` の場合に全体が `True` になります
* 論理演算子 `or` を使うと、どちらかの条件が `True` の場合に全体が `True` になります
* 論理演算子 `not` を使うと、条件の真偽を反転させます ( `True` → `False`、`False` → `True` )
* if 文と組み合わせて使いましょう

</details>
