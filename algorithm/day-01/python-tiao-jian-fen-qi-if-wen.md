# Python: 条件分岐 (if 文)

### 6.1 条件分岐とは

**条件分岐**は、特定の条件が成立するかどうかによってプログラムの実行経路を変えるプログラミングの基本構造です。条件分岐を使うことで、状況に応じた処理を行うプログラムを作成できます。

#### 条件分岐の必要性

プログラムは単に上から下へ順番に実行するだけでなく、データや状況に応じて異なる処理を行う必要があります。例えば、

* ユーザーの年齢によって表示するコンテンツを変える
* 入力値が有効かどうかを確認し、無効な場合はエラーメッセージを表示する
* 商品の在庫状況によって購入ボタンの表示・非表示を切り替える
* スコアに応じて異なる評価やフィードバックを提供する

> 📝 **ポイント**: 条件分岐はプログラムに 「判断力」 を与えます。これにより、同じプログラムでも異なる状況に対応できるようになります。

### 6.2 if 文の基本構造

Pythonでは、条件分岐は主に `if` 文を使って実装します。

```python
# 基本構文
if 条件式:
    # 条件が真の場合に実行される処理
    処理1
    処理2
    ...
```

条件式の結果が `True` の場合、インデント (字下げ) されたブロック内の処理が実行されます。条件式の結果が `False` の場合、そのブロックはスキップされます。

```python
# 基本的なif文
x = 10
print(f"xの値は{x}です")

if x > 0:
    print("xは正の数です")
```

実行結果:

```
xの値は10です
xは正の数です
```

> 📝 **ポイント**: Pythonでは、インデント (字下げ) がブロックを示す重要な要素です。一般的に 4スペースが標準的なインデントとして使用されます。インデントを揃えないとエラーになるので注意しましょう。

### 6.3 if-else 構文

条件が真の場合と偽の場合で異なる処理を行いたい場合は、`if-else`  構文を使用します。

<pre><code># 基本構文
if 条件式:
<strong>    # 条件が真の場合に実行される処理
</strong>    処理A
else:
    # 条件が偽の場合に実行される処理
    処理B
</code></pre>

```python
x = -5

if x > 0:
    print("xは正の数です")
else:
    print("xは0または負の数です")
```

実行結果:

```
xは0または負の数です
```

#### 使用例: 合格・不合格の判定

```python
score = 75
passing_score = 60

if score >= passing_score:
    print("合格です！おめでとうございます。")
else:
    print("不合格です。もう一度チャレンジしてください。")
```

実行結果:

```
合格です！おめでとうございます。
```

### 6.4 if-elif-else 構文 ⭐

3つ以上の選択肢がある場合や、複数の条件を順番に評価したい場合は、`if-elif-else` 構文を使用します。`elif` は 「else if」 の略です。

```python
# 基本構文
if 条件式1:
    # 条件式1が真の場合に実行される処理
    処理A
elif 条件式2:
    # 条件式1が偽で、条件式2が真の場合に実行される処理
    処理B
elif 条件式3:
    # 条件式1と2が偽で、条件式3が真の場合に実行される処理
    処理C
else:
    # すべての条件式が偽の場合に実行される処理
    処理D
```

> 📝 **ポイント**: 条件は上から順に評価され、最初に真となった条件に対応するブロックのみが実行されます。その後の条件は評価されません。

#### 使用例: 成績評価

```python
score = 85

if score >= 90:
    print("評価: A")
elif score >= 80:
    print("評価: B")
elif score >= 70:
    print("評価: C")
elif score >= 60:
    print("評価: D")
else:
    print("評価: F")
```

実行結果:

```
評価: B
```

### 6.5 複合条件とネスト ⭐

複数の条件を組み合わせることで、より複雑な条件分岐を実現できます。

#### 論理演算子を使った条件の組み合わせ

```python
# AND条件（両方の条件を満たす必要がある）
age = 25
income = 300000

if age >= 20 and income >= 250000:
    print("ローン申請資格があります")
```

実行結果:

```
ローン申請資格があります
```

```python
# OR条件（少なくとも一方の条件を満たせばよい）
day = "土曜日"

if day == "土曜日" or day == "日曜日":
    print("週末です")
```

実行結果:

```
週末です
```

```python
# NOTとの組み合わせ
is_holiday = False

if not is_holiday:
    print("仕事の日です")
```

実行結果:

```
仕事の日です
```

#### ネストした if 文

if 文の中に別の if 文を入れることで、条件のネスト (入れ子) 構造を作ることができます。これにより、より細かな条件分岐が可能になります。

使用例: 年齢と免許による判定

```python
age = 25
has_license = True

if age >= 18:
    print("成人です")
    if has_license:
        print("運転できます")
    else:
        print("免許がありません")
else:
    print("未成年です")
```

実行結果:

```
成人です
運転できます
```

> 📝 **ポイント**: ネストが深くなると可読性が低下し、バグが発生しやすくなります。一般的に、ネストは 3レベル以内に抑えることが推奨されます。深いネストが必要な場合は、関数に分割するなどの構造化を検討しましょう。

### 6.6 インデントの重要性

Pythonでは、インデント (字下げ) がコードブロックを定義する重要な要素です。適切なインデントがないと、構文エラーが発生したり、予期しない動作をしたりします。

#### 正しいインデントの例

```python
if x > 0:
    print("xは正の数です")  # 4スペースのインデント
    y = x * 2               # 同じブロック内
    print(f"yは{y}です")     # 同じブロック内
    
    if y > 10:              # ネストされた条件分岐
        print("yは10より大きいです")  # さらにインデント (8スペース)
        z = y * 2
    print("yの処理を完了しました")  # 元のインデントレベルに戻る

print("処理終了")  # インデントなし (メインブロック)
```

#### 間違ったインデントの例と起こる問題

```python
# インデントが不一致（エラーになる）
if score >= 60:
    print("合格です")
  print("おめでとう")  # インデントが不一致でSyntaxError
```

> 📝 **ポイント**: Python では一貫したインデントを使用することが重要です。多くの IDE やテキストエディターは、タブキーを押すと自動的に適切なインデントが挿入されます (通常 4スペース)。混乱を避けるため、プロジェクト内ではスペースの数を一貫させましょう。

### 6.8 フローチャートでの条件分岐の表現

条件分岐はフローチャートでは以下のように表現されます。

#### if 文のフローチャート

基本的なif文は下図のようになります：

```
    ┌───────┐
    │  開始 │
    └───┬───┘
        ↓
┌───────────────┐
│  条件を評価    │
└───────┬───────┘
        ↓
    ┌───────┐ Yes
    │ 条件式 ├────→ ┌──────────┐
    └───┬───┘      │   処理A   │
        │ No       └─────┬────┘
        ↓                │
    ┌───────┐            │
    │ 終了   │←──────────┘
    └───────┘
```

#### if-else文のフローチャート

```
    ┌───────┐
    │ 開始  │
    └───┬───┘
        ↓
┌───────────────┐
│  条件を評価   　│
└───────┬───────┘
        ↓
    ┌───────┐ Yes   ┌──────────┐
    │　条件式 ├─────→│ 　処理A   │
    └───┬───┘       └─────┬────┘
        │ No              │
        ↓                 │
　　┌─────────┐  　        │
   │  処理B   │    　      │
   └────┬────┘     　     │
        ↓                 ↓
    ┌───────┐             │
    │  終了  │←───────────┘
    └───────┘
```

> 📝 **ポイント**: フローチャートは複雑な条件分岐を視覚的に理解するのに役立ちます。Draw.io などのツールを使って、自分のアルゴリズムをフローチャートで表現してみましょう。
